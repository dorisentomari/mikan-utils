{"version":3,"file":"browser.js","sources":["../../../src/browser.ts"],"sourcesContent":["import { isPlainObject } from './common';\n\n/**\n * dom 选择器\n *\n * @param selector\n */\nexport function $selector(selector: string) {\n  if (!selector) {\n    return null;\n  }\n\n  const type = selector.substring(0, 1);\n  if (type === '#') {\n    if (document.querySelector) {\n      return document.querySelector(selector);\n    }\n  } else if (type === '.') {\n    if (document.querySelectorAll) {\n      return document.querySelectorAll(selector);\n    }\n    return document.getElementsByClassName(selector.substring(1));\n  } else {\n    if (document.querySelectorAll) {\n      return document.querySelectorAll(selector);\n    }\n    return document.getElementsByTagName(selector);\n  }\n}\n\n/**\n * 判断元素是否有某个class\n *\n * @param elem\n * @param className\n */\nexport function hasClassName(elem: HTMLElement, className: string) {\n  if (elem) {\n    return elem.className.trim().indexOf(className) > -1;\n  }\n  throw new Error(`cannot find ${elem} element`);\n}\n\n/**\n * 给某个元素添加class\n *\n * @param elem\n * @param name\n */\nexport function addClassName(elem: HTMLElement, name: string) {\n  if (!hasClassName(elem, name)) {\n    const className = elem.className.trim();\n    if (className) {\n      elem.className += ` ${name}`;\n    } else {\n      elem.className += name;\n    }\n  }\n}\n\n/**\n * 删除某个元素的class\n *\n * @param elem\n * @param name\n */\nexport function deleteClassName(elem: HTMLElement, name: string) {\n  if (hasClassName(elem, name)) {\n    const reg = new RegExp('(\\\\s|^)' + name + '(\\\\s|$)');\n    elem.className = elem.className.replace(reg, ' ').trim();\n  }\n}\n\n/**\n * 替换某个元素的class\n *\n * @param elem\n * @param newClassName\n * @param oldClassName\n */\nexport function replaceClassName(elem: HTMLElement, newClassName: string, oldClassName: string) {\n  deleteClassName(elem, oldClassName);\n  addClassName(elem, newClassName);\n}\n\n/**\n * @description 判断是否有效 dom\n * @param dom\n */\nexport function isValidDom(dom: any) {\n  if (!dom) {\n    return false;\n  }\n\n  if (Array.isArray(dom)) {\n    return dom;\n  }\n\n  if (typeof HTMLElement === 'object') {\n    return dom instanceof HTMLElement;\n  }\n  return dom && typeof dom === 'object' && dom.nodeType === 1 && typeof dom.nodeName === 'string';\n}\n\n/**\n * @description 通用设置样式\n * @param selector {string | HTMLElement}\n * @param style {Object}\n */\nexport function setDomStyle(selector: any, style: any = {}) {\n  if (!selector) {\n    return;\n  }\n\n  let dom: any = null;\n  if (typeof selector === 'string') {\n    dom = document.querySelector(selector);\n  } else if (isValidDom(selector)) {\n    dom = selector;\n  }\n\n  if (!isValidDom(dom)) {\n    return;\n  }\n\n  Object.keys(style).forEach((key) => {\n    dom.style[key] = style[key];\n  });\n}\n\n/**\n * 通过 dom 设置样式\n * @param selector\n * @param cssText\n */\nexport function setDomListStyleCssText(selector: any, cssText: string) {\n  const domList = $selector(selector);\n  if (Array.isArray(domList)) {\n    domList.forEach((domItem: any) => {\n      domItem.style.cssText = cssText;\n    });\n  }\n}\n\n/**\n * @description 通用设置属性\n * @param dom {HTMLElement}\n * @param attributes {Object}\n */\nexport function setDomAttributes(dom: any, attributes: any = {}) {\n  if (!dom) {\n    return;\n  }\n  Object.keys(attributes).forEach((key) => {\n    dom[key] = attributes[key];\n  });\n}\n\n/**\n * @description dom 添加类名\n * @param dom\n * @param className\n */\nexport function domAddClassName(dom: any, className: string) {\n  if (isValidDom(dom)) {\n    dom.classList.add(className);\n  }\n}\n\n/**\n * @description dom 删除类名\n * @param dom\n * @param className\n */\nexport function domRemoveClassName(dom: any, className: string) {\n  if (isValidDom(dom)) {\n    dom.classList.remove(className);\n  }\n}\n\n/**\n * @description 删除 dom\n * @param className\n */\nexport function removeDom(className: string) {\n  try {\n    const childDomList = document.querySelectorAll(className.trim());\n    for (let i = 0; i < childDomList.length; i++) {\n      const childDom = childDomList[i];\n      if (childDom.parentNode) {\n        childDom.parentNode.removeChild(childDom);\n      }\n    }\n  } catch (e) {\n    console.log('e', e);\n  }\n}\n\n/**\n * @description 检查 dom 包含哪个类名\n * @param dom\n * @param className\n */\nexport function domIsContainsClassName(dom: any, className: string) {\n  if (isValidDom(dom)) {\n    return dom.classList.contains(className);\n  }\n  return false;\n}\n\n/**\n * @description 创建 dom\n * @param elem {string}\n * @param attributes {Object}\n * @param style {Object}\n */\nexport function createElement(elem: any, attributes: object = {}, style: object = {}) {\n  if (!elem) {\n    return null;\n  }\n\n  const dom = document.createElement(elem);\n\n  if (isPlainObject(attributes)) {\n    setDomAttributes(dom, attributes);\n  }\n\n  if (isPlainObject(style)) {\n    setDomStyle(dom, style);\n  }\n\n  return dom;\n}\n"],"names":[],"mappings":"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"}